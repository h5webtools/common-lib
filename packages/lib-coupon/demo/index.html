<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>CouponList</title>
  <link rel="stylesheet" href="https://cdnsit.jyblife.com/product/tickets_0510/assets/css/index.css?v=20170808170657">
  <script type="text/javascript">
    (function(doc, win) {
      var basicWidth = window.basicWidth || 750;
      var minWidth = 320;
      var htmlElement = doc.documentElement;
      var recalc = function() {
        var clientWidth = htmlElement.clientWidth || (basicWidth / 2);
        clientWidth = clientWidth < minWidth ? minWidth : clientWidth;
        htmlElement.style.fontSize = 100 * (clientWidth / basicWidth) + 'px';
      };
      recalc();
      if (!win.addEventListener) return;
      win.addEventListener('resize', recalc, false);
    })(document, window);
</script>  
</head>

<body>
  <button id='btn'>显示红包列表</button>
  <script src="https://cdn.jyblife.com/static/js/lib/zepto-1.2.0-all-min.js"></script>
  <script src="../dist/couponlist.dev.js"></script>
  <script>
    var data = [
      {
        "coupon_cfg_id": "1460",
        "coupon_id": "6295936318413708000",
        "cust_id": "23026474",
        "description": "\u4f7f\u7528\u7ea2\u5305\uff0c\u652f\u4ed884\u5143\uff0c\u5373\u53ef\u83b7\u5f97\u4e00\u5f20100\u5143\u7684\u4eac\u4e1ce\u5361",
        "detail": {
          "algorithm": "1",
          "deduct_amt": "1500",
          "remain_amt": "1500",
          "show_amt": "1500",
          "total_amt": "1500",
          "value": "1500"
        },
        "effect_time": "2017-07-26 19:23:11",
        "expired_time": "2017-08-24 23:59:59",
        "fetch_rule_id": "0",
        "is_read": "1",
        "name": "15\u5143\u4eac\u4e1ce\u5361\u5238",
        "receive_time": "2017-07-26 19:23:11",
        "remark": "",
        "source_id": "14120",
        "source_type": "1",
        "status": "0",
        "status_time": "2017-07-26 19:24:17",
        "tel": "18503078265",
        "type_id": "3",
        "use_rule_id": "0",
        "use_rules": {
          "app_jump": "jtjr:\/\/web?url=https%3A%2F%2Fcdn.jyblife.com%2Fproduct%2Ftickets_0510%2Fecard.html%3Fcode_type%3D5%2C6%26default%3D6%26couponId%3D6295936318413708000",
          "fit_prds": "348,349",
          "fit_type": "3",
          "h5_jump": "jtjr:\/\/web?url=https%3A%2F%2Fcdn.jyblife.com%2Fproduct%2Ftickets_0510%2Fecard.html%3Fcode_type%3D5%2C6%26default%3D6%26couponId%3D6295936318413708000",
          "prd_amt_lmt": "{}"
        },
        "new_url": "jtjr:\/\/web?url=https%3A%2F%2Fcdn.jyblife.com%2Fproduct%2Ftickets_0510%2Fecard.html%3Fcode_type%3D5%2C6%26default%3D6%26couponId%3D6295936318413708000",
        "act_id": "14120",
        "cid": "6295936318413708000",
        "cdesc": "15\u5143\u4eac\u4e1ce\u5361\u5238",
        "amount": "1500",
        "rec_time": "2017-07-26 19:23:11",
        "cust": "23026474",
        "oid": null,
        "read_status": "1",
        "usage": "\u4f7f\u7528\u7ea2\u5305\uff0c\u652f\u4ed884\u5143\uff0c\u5373\u53ef\u83b7\u5f97\u4e00\u5f20100\u5143\u7684\u4eac\u4e1ce\u5361",
        "ord_amt_lmt": "{}",
        "fit_type": "3",
        "fit_prds": "348,349",
        "prds_arr": [
          "348",
          "349"
        ],
        "limit": []
      },
      {
        "coupon_cfg_id": "1594",
        "coupon_id": "6300249987528236828",
        "cust_id": "23026474",
        "description": "\u53ef\u7528\u4e8e\u661f\u5df4\u514b\u5957\u9910\uff0c\u8d2d\u4e70\u661f\u5df4\u514b\u5957\u9910\u53ef\u76f4\u63a5\u62b5\u6263\u5957\u9910\u91d1\u989d",
        "detail": {
          "algorithm": "1",
          "deduct_amt": "1000",
          "remain_amt": "1000",
          "show_amt": "1000",
          "total_amt": "1000",
          "value": "1000"
        },
        "effect_time": "2017-08-07 17:04:10",
        "expired_time": "2017-08-13 23:59:59",
        "fetch_rule_id": "0",
        "is_read": "0",
        "name": "10\u5143\u7ea2\u5305\u4e28\u661f\u5df4\u514b\u5957\u9910\u4e13\u4eab",
        "receive_time": "2017-08-07 17:04:10",
        "remark": "\u8425\u9500\u4efb\u52a1[4874]\u53d1\u653e",
        "source_id": "15187",
        "source_type": "1",
        "status": "0",
        "status_time": "2017-08-07 17:04:10",
        "tel": "18503078265",
        "type_id": "3",
        "use_rule_id": "0",
        "use_rules": {
          "app_jump": "jtjr:\/\/web?url=https%3A%2F%2Fcdn.jyblife.com%2Fproduct%2Ftickets_0510%2Findex.html%3Fcode_type%3D13%26login%3Dtrue%26mta_id%3Dibanner%26couponId%3D6300249987528236828",
          "fit_prds": "362,371",
          "fit_type": "3",
          "h5_jump": "jtjr:\/\/web?url=https%3A%2F%2Fcdn.jyblife.com%2Fproduct%2Ftickets_0510%2Findex.html%3Fcode_type%3D13%26login%3Dtrue%26mta_id%3Dibanner%26couponId%3D6300249987528236828",
          "prd_amt_lmt": "{\"362\":11200,\"371\":11200}"
        },
        "new_url": "jtjr:\/\/web?url=https%3A%2F%2Fcdn.jyblife.com%2Fproduct%2Ftickets_0510%2Findex.html%3Fcode_type%3D13%26login%3Dtrue%26mta_id%3Dibanner%26couponId%3D6300249987528236828",
        "act_id": "15187",
        "cid": "6300249987528236828",
        "cdesc": "10\u5143\u7ea2\u5305\u4e28\u661f\u5df4\u514b\u5957\u9910\u4e13\u4eab",
        "amount": "1000",
        "rec_time": "2017-08-07 17:04:10",
        "cust": "23026474",
        "oid": null,
        "read_status": "0",
        "usage": "\u53ef\u7528\u4e8e\u661f\u5df4\u514b\u5957\u9910\uff0c\u8d2d\u4e70\u661f\u5df4\u514b\u5957\u9910\u53ef\u76f4\u63a5\u62b5\u6263\u5957\u9910\u91d1\u989d",
        "ord_amt_lmt": "{\"362\":11200,\"371\":11200}",
        "fit_type": "3",
        "fit_prds": "362,371",
        "prds_arr": [
          "362",
          "371"
        ],
        "limit": {
          "362": 11200,
          "371": 11200
        }
      }
    ];

    (function() {
      var couponList = new CouponList();
      var cid = 0
      document.getElementById('btn').addEventListener('click', function() {
        couponList.show({
          data: data,
          cid: cid,
          onChangeCoupon: function(node) {
            console.log('>>>', node)
            cid = node.attr('cid')
          }
        })
      })
    })();
  </script>
</body>

</html>