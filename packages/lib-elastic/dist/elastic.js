!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Elastic=e()}(this,function(){"use strict";function t(){}function e(t){t.preventDefault()}var i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},s={minDistance:100,releaseBack:!0,direct:"up",stopDocMove:!0,initValue:0,condition:function(){return!0},onRelease:t,onRecovery:t};return function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i(this,t),!e)throw new Error("element为必填项");this.element=e,this.options=o({},s,n),this.init()}return n(t,[{key:"init",value:function(){this.position={},this._releaseEvent(),this._bindEvent()}},{key:"_bindEvent",value:function(){this.element.addEventListener("touchstart",this._tstart.bind(this),!1)}},{key:"_tstart",value:function(t){var i=this.options;if(i.condition()){var n=t.changedTouches[0];this.ignoreTouch=!1,this.position.sx=n.pageX,this.position.sy=n.pageY,this.element.addEventListener("touchmove",this._tmove.bind(this),!1),this.element.addEventListener("touchend",this._tend.bind(this),!1),i.stopDocMove&&document.addEventListener("touchmove",e,!1)}}},{key:"_tmove",value:function(t){var i=this.options,n=t.changedTouches[0];this.position.mx=n.pageX,this.position.my=n.pageY;var o=this.position.mx-this.position.sx,s=this.position.my-this.position.sy;this.ignoreTouch=!1,Math.abs(o)>Math.abs(s)?o>0?this.direct="right":o<0&&(this.direct="left"):Math.abs(o)<Math.abs(s)?s>0?this.direct="down":s<0&&(this.direct="up"):this.ignoreTouch=!0,this.diffY=this.position.my-this.position.sy,this.direct===i.direct?this.fingerFollow():i.stopDocMove&&document.removeEventListener("touchmove",e,!1)}},{key:"_tend",value:function(t){var e=this.options,i=t.changedTouches[0];if(this.position.ey=i.pageY,Math.abs(this.position.ey-this.position.sy)<e.minDistance)return this._releaseEvent(),void this.recoverStatus();e.releaseBack&&this.recoverStatus(),this._releaseEvent(),this.direct===e.direct&&e.onRelease.call(this),this.element.style.webkitTransform="",this.element.style.webkitTransitionDuration=""}},{key:"_releaseEvent",value:function(){this.element.removeEventListener("touchmove",this._tmove.bind(this),!1),this.element.removeEventListener("touchend",this._tend.bind(this),!1),document.removeEventListener("touchmove",e,!1)}},{key:"destroyEvent",value:function(){this.element.removeEventListener("touchstart",this._tstart.bind(this),!1),this._releaseEvent()}},{key:"fingerFollow",value:function(){this.element.style.webkitTransform="translate3d(0, "+(this.options.initValue+this.diffY)+"px, 0)",this.element.style.webkitTransitionDuration="0ms"}},{key:"recoverStatus",value:function(){function t(n){n.stopPropagation(),e.onRecovery(),i.removeEventListener("webkitTransitionEnd",t,!1)}var e=this.options,i=this.element;i.addEventListener("webkitTransitionEnd",t,!1),i.style.webkitTransform="translate3d(0, 0, 0)",i.style.webkitTransitionDuration="300ms"}}]),t}()});
