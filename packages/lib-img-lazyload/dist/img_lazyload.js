!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ImgLazyload=e()}(this,function(){"use strict";var t=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},n={layer:!1,attr:"data-lazy"};return function(){function i(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t(this,i),!e)throw new Error("wrapNode为必填项");this.wrapNode=e,this.options=r({},n,o),this.loadTimer=null,this._init()}return e(i,[{key:"_init",value:function(){var t=this,e=window.innerHeight,r=this.wrapNode,n=this.options,i=r.querySelectorAll("img["+n.attr+"]");if((i=Array.prototype.slice.apply(i)).length){var o=n.layer?r.scrollTop:window.pageYOffset;i=i.filter(function(t){var e=t.getAttribute(n.attr);return e&&t.setAttribute("top",t.getBoundingClientRect().top+o),e}),clearInterval(this.loadTimer),this.loadTimer=setInterval(function(){o=n.layer?r.scrollTop:window.pageYOffset,i.length?i=i.filter(function(t){var r=t.getAttribute("top");return!(null!=r&&o+e>r)||(t.src=t.getAttribute(n.attr),t.removeAttribute(n.attr),!1)}):clearInterval(t.loadTimer)},200)}}},{key:"stop",value:function(){clearInterval(this.loadTimer)}}]),i}()});
